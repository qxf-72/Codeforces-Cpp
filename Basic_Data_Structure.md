# 栈

栈是一种先进后出的线性数据结构。C++STL 中有栈的实现 `stack<>`。以下讨论栈的应用。

## 表达式计算

表达式计算是栈的经典应用，表达式分为三类：
- 中缀表达式：常见的表达式
- 前缀表达式：波兰式，`op A B`
- 后缀表达式：逆波兰式，`A B op`

**后缀表达式求值**
- 遇到一个数，先入栈
- 遇到运算符，将栈顶两个数出栈进行计算，将结果入栈

**中缀表达式转后缀表达式**
- 遇到一个数，直接输出
- 遇到左括号，入栈
- 遇到右括号，不断取栈顶出栈，知道遇到左括号
- 遇到运算符，只要栈顶运算符优先级**大于等于**新运算符（左括号优先级最低，其余按运算优先级排列），不断取栈顶出栈（优先级高的先出栈计算），然后新运算符入栈

---

## 单调栈

单调栈即满足单调性的栈结构。

单调栈适合用于寻找序列中**下一个更大**、**下一个更小**的元素。单调栈就是在遍历序列的同时，根据当前遍历的点元素的大小选择是否将目前栈顶元素弹出，有两种选择策略：
- 当前元素 > 栈顶元素，将栈顶元素弹出：当前元素对于被弹出的元素，就是下一个更大元素。
- 当前元素 < 栈顶元素，将栈顶元素弹出：当前元素对于被弹出的元素，就是下一个更小元素。

可以一直弹出直到不满足条件或者栈为空，然后将当前元素入栈。当遍历完序列之后，栈中的元素必然是单调的，其栈中元素在原序列中不存在下一个更大（更小）的元素（具有 下一个更大（更小元素） 的元素已经在上述遍历过程被弹出栈）。

单调栈常常与**贡献法**结合，贡献法就是考虑每个元素对于答案的贡献，通常结合单调栈寻找元素的作用边界。

#### 模板代码

[**Monotonic_Stack.cpp**](/copypasta/Basic_Data_Structure/Monotonic_Stack.cpp)
模板的代码以下一个更小的元素为例，可以求出该元素前后 第一个更小元素的下标。此时可以得到**以该元素为最小值的最大区间边界**。将数组中的元素取反，此时求的就是下一个更大元素。

通常与贡献法结合，此外还可以求柱状图的最大矩形面积。

#### 相关题目

